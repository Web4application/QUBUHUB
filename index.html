<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QUBUHUB – Gateway to Web4</title>
<style>
  :root { --bg:#0d1117; --panel:#161b22; --card:#1f2430; --text:#e6edf3; --muted:#9da7b3; --brand:#ffd700; --link:#58a6ff; }
  * { box-sizing: border-box; }
  body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
  header { padding:32px 16px; background:linear-gradient(135deg,#171b26,#2a2f45); text-align:center; }
  header h1 { margin:0; font-size:2.4rem; color:var(--brand); letter-spacing:.5px; }
  header p { margin:.5rem 0 0; color:var(--muted); }
  .nav { background:var(--panel); text-align:center; padding:10px 8px; position:sticky; top:0; z-index:20; }
  .nav a { color:var(--link); margin:0 10px; text-decoration:none; font-weight:600; }
  .wrap { max-width:1100px; margin:0 auto; padding:28px 16px; }
  h2 { margin:0 0 12px; color:var(--brand); text-align:center; }
  .about { text-align:center; color:var(--muted); max-width:820px; margin:0 auto 26px; }
  .cta-bar { background: #273047; padding:16px; border-radius:10px; display:flex; gap:16px; align-items:center; justify-content:center; flex-wrap:wrap; }
  .btn { background:var(--brand); color:#111; border:none; padding:12px 18px; border-radius:8px; font-weight:800; cursor:pointer; text-decoration:none; }
  .btn.outline { background:transparent; color:var(--link); border:1px solid var(--link); }
  .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:16px; margin-top:18px; }
  .card { background:var(--card); border:1px solid #2b3242; border-radius:12px; padding:16px; display:flex; flex-direction:column; gap:10px; }
  .card h3 { margin:0; font-size:1.05rem; color:var(--text); }
  .card p { margin:0; color:var(--muted); font-size:.95rem; min-height:3.4em; }
  .card .badges { display:flex; gap:8px; flex-wrap:wrap; font-size:.8rem; color:#c8d1dd; }
  .card .actions { display:flex; gap:10px; margin-top:auto; }
  .note { text-align:center; color:var(--muted); font-size:.9rem; margin-top:10px; }
  footer { text-align:center; color:var(--muted); padding:28px 12px; background:var(--panel); margin-top:28px; }
  .search { margin:16px auto 0; max-width:600px; display:flex; gap:10px; }
  .search input { flex:1; padding:10px 12px; border-radius:8px; border:1px solid #2b3242; background:#0f1421; color:var(--text); }
  .search select { padding:10px; border-radius:8px; border:1px solid #2b3242; background:#0f1421; color:var(--text); }
  .pill { background:#0f1421; border:1px solid #283046; padding:4px 8px; border-radius:999px; }
  .hero-steps { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:10px; }
  .hero-steps .pill { color:#cfd6e2; }
</style>
</head>
<body>
  <header>
    <h1>QUBUHUB</h1>
    <p>The entrance to all Web4 applications — Blockchain • AI • IoT</p>
    <div class="hero-steps">
      <span class="pill">Subscribe ($35/mo)</span>
      <span class="pill">Email proof → Kubulee.kl@gmail.com</span>
      <span class="pill">Receive private download links</span>
    </div>
  </header>

  <div class="nav">
    <a href="#about">About</a>
    <a href="#projects">Projects</a>
    <a href="#subscribe">Subscribe</a>
    <a href="https://github.com/Web4application?tab=repositories" target="_blank">GitHub</a>
  </div>

  <main class="wrap">
    <section id="about">
      <h2>About QUBUHUB</h2>
      <p class="about">
        QUBUHUB is the organizational gateway to the entire <b>Web4application</b> ecosystem.
        Explore all projects from one hub. When you subscribe, you unlock access to
        production-ready software packages, diagrams, and step-by-step workflows for every project.
      </p>
      <div class="cta-bar">
        <a class="btn" href="https://nowpayments.io/donation/Web4" target="_blank" rel="noopener">Subscribe – $35/month</a>
        <a class="btn outline" href="#projects">Browse Projects</a>
      </div>
    </section>

    <section id="projects" style="margin-top:34px;">
      <h2>Projects</h2>

      <div class="search">
        <input id="q" placeholder="Search projects (name/description)..." />
        <select id="sort">
          <option value="updated">Sort: Recently updated</option>
          <option value="stars">Sort: Most stars</option>
          <option value="name">Sort: Name A→Z</option>
        </select>
      </div>

      <div id="repoGrid" class="grid" aria-live="polite"></div>
      <p class="note" id="status">Loading repositories…</p>
    </section>

    <section id="subscribe" style="margin-top:34px;">
      <h2>Subscribe & Unlock</h2>
      <div class="cta-bar">
        <div>
          <div>1) Pay via NOWPayments → <a href="https://nowpayments.io/donation/Web4" target="_blank" rel="noopener">nowpayments.io/donation/Web4</a></div>
          <div>2) Email proof to: <b>Kubulee.kl@gmail.com</b></div>
          <div>3) Receive your private download links & instructions</div>
        </div>
        <a class="btn" href="https://nowpayments.io/donation/Web4" target="_blank" rel="noopener">Subscribe Now</a>
      </div>
      <p class="note">Your subscription covers <b>all projects</b> under Web4application. Cancel anytime.</p>
    </section>
  </main>

  <footer>
    © 2025 QUBUHUB • A Web4Application initiative
  </footer>

<script>
(async function () {
  const ORG = 'Web4application';
  const grid = document.getElementById('repoGrid');
  const status = document.getElementById('status');
  const q = document.getElementById('q');
  const sortSel = document.getElementById('sort');

  let repos = [];
  async function fetchAllRepos(page=1, acc=[]) {
    const url = `https://api.github.com/orgs/${ORG}/repos?per_page=100&page=${page}&type=public`;
    const res = await fetch(url);
    if (!res.ok) throw new Error('GitHub API error: ' + res.status);
    const data = await res.json();
    acc = acc.concat(data);
    if (data.length === 100) return fetchAllRepos(page+1, acc);
    return acc;
  }

  function short(text, n=140) {
    if (!text) return '';
    const t = text.trim();
    return t.length > n ? t.slice(0, n-1) + '…' : t;
  }

  function render(list) {
    grid.innerHTML = '';
    list.forEach(r => {
      const card = document.createElement('div');
      card.className = 'card';
      const desc = r.description || 'No description yet.';
      const lang = r.language ? `<span class="pill">${r.language}</span>` : '';
      const issues = `<span class="pill">Issues: ${r.open_issues_count}</span>`;
      const stars = `<span class="pill">★ ${r.stargazers_count}</span>`;
      const updated = new Date(r.updated_at).toLocaleDateString();

      card.innerHTML = `
        <h3>${r.name}</h3>
        <p>${short(desc)}</p>
        <div class="badges">${lang}${stars}${issues}<span class="pill">Updated: ${updated}</span></div>
        <div class="actions">
          <a class="btn" href="project.html?repo=${encodeURIComponent(r.name)}">Learn more</a>
          <a class="btn outline" href="https://github.com/${r.full_name}" target="_blank" rel="noopener">GitHub</a>
        </div>
      `;
      grid.appendChild(card);
    });
    status.textContent = list.length ? '' : 'No repositories found.';
  }

  function applyFilters() {
    const term = (q.value || '').toLowerCase();
    let list = repos.filter(r => {
      const hay = (r.name + ' ' + (r.description || '')).toLowerCase();
      return hay.includes(term);
    });
    const sort = sortSel.value;
    if (sort === 'stars') list.sort((a,b)=>b.stargazers_count-a.stargazers_count);
    else if (sort === 'name') list.sort((a,b)=>a.name.localeCompare(b.name));
    else list.sort((a,b)=>new Date(b.updated_at)-new Date(a.updated_at));
    render(list);
  }

  try {
    repos = await fetchAllRepos();
    applyFilters();
  } catch (e) {
    status.textContent = 'Failed to load repos. Try reloading.';
    console.error(e);
  }

  q.addEventListener('input', applyFilters);
  sortSel.addEventListener('change', applyFilters);
})();
</script>
</body>
</html>
